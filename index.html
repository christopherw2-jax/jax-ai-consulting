</nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>AI Solutions That Actually Work for Small Business</h1>
            <p>Help your retail shop, salon, or clinic save 10+ hours per week with simple AI automation that just works.</p>
            <div class="hero-buttons">
                <button class="btn-primary" onclick="openAssessment()">Get Your Free AI Assessment</button>
                <a href="#services" class="btn-secondary">See How It Works</a>
            </div>
        </div>
    </section>

    <!-- Problem/Solution Section -->
    <section class="problem-section">
        <div class="container">
            <div class="problem-content">
                <div class="problem-text">
                    <h2>Tired of Repetitive Tasks Eating Up Your Day?</h2>
                    <p>You didn't start your business to spend hours on:</p>
                    <ul class="problem-list">
                        <li>Manually scheduling appointments and sending reminders</li>
                        <li>Following up with customers after every visit</li>
                        <li>Tracking inventory and reordering supplies</li>
                        <li>Writing the same emails and responses over and over</li>
                        <li>Managing social media posts and reviews</li>
                    </ul>
                    <p><strong>What if you could automate all of this and get back to what you love about your business?</strong></p>
                </div>
                <div class="solution-box">
                    <h3>The JAX AI Solution</h3>
                    <p>We help small business owners like you implement simple AI tools that work 24/7, so you don't have to.</p>
                    <p>Our clients typically save 10-15 hours per week and see immediate improvements in customer satisfaction and revenue.</p>
                    <p><strong>No tech experience required.</strong> We handle the setup, training, and ongoing support.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <div class="container">
            <h2>Optimize. Streamline. Automate.</h2>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">ðŸ“Š</div>
                    <h3>Optimize</h3>
                    <p>Turn your business data into actionable insights that drive smarter decisions and increased revenue.</p>
                    <div class="service-examples">
                        <h4>Real Examples:</h4>
                        <ul>
                            <li>Customer behavior analysis</li>
                            <li>Peak hours optimization</li>
                            <li>Inventory demand forecasting</li>
                            <li>Revenue trend reporting</li>
                        </ul>
                    </div>
                </div>
                <div class="service-card">
                    <div class="service-icon">âš¡</div>
                    <h3>Streamline</h3>
                    <p>Automate booking, billing, and customer communications with seamless AI-powered workflows.</p>
                    <div class="service-examples">
                        <h4>Real Examples:</h4>
                        <ul>
                            <li>Automated appointment scheduling</li>
                            <li>Smart customer communications</li>
                            <li>Invoice and payment processing</li>
                            <li>Review request automation</li>
                        </ul>
                    </div>
                </div>
                <div class="service-card">
                    <div class="service-icon">ðŸ¤–</div>
                    <h3>Automate</h3>
                    <p>Set up intelligent systems that handle repetitive tasks 24/7, giving you time to focus on growing your business.</p>
                    <div class="service-examples">
                        <h4>Real Examples:</h4>
                        <ul>
                            <li>Customer service chatbots</li>
                            <li>Social media management</li>
                            <li>Email marketing campaigns</li>
                            <li>Inventory alerts and reordering</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section class="pricing" id="pricing">
        <div class="container">
            <h2>Pay for Performance Pricing</h2>
            <p class="pricing-subtitle">You only pay when we prove we've saved you time and money</p>
            
            <div class="pricing-content">
                <div class="pricing-text">
                    <h3>How Our Unique Pricing Works</h3>
                    <div class="pricing-steps">
                        <div class="pricing-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Free Consultation</h4>
                                <p>We identify your pain points and you tell us what your time is worth per hour</p>
                            </div>
                        </div>
                        <div class="pricing-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>We Build Your Solution</h4>
                                <p>We develop and deliver your complete AI automation system at no upfront cost</p>
                            </div>
                        </div>
                        <div class="pricing-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>You Confirm Time Savings</h4>
                                <p>You tell us exactly how many hours per week our solution saves you</p>
                            </div>
                        </div>
                        <div class="pricing-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>You Pay 10% of Annual Savings</h4>
                                <p>Your fee is just 10% of the money you save per year, includes 12 months of support</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="pricing-example">
                    <h3>Real Example</h3>
                    <div class="example-card">
                        <div class="example-row">
                            <span class="example-label">Your time value:</span>
                            <span class="example-value">$50/hour</span>
                        </div>
                        <div class="example-row">
                            <span class="example-label">Time saved weekly:</span>
                            <span class="example-value">4 hours</span>
                        </div>
                        <div class="example-row">
                            <span class="example-label">Annual savings:</span>
                            <span class="example-value">$10,400</span>
                        </div>
                        <div class="example-row total">
                            <span class="example-label">Your investment:</span>
                            <span class="example-value">$1,040</span>
                        </div>
                        <div class="example-note">
                            <p>That's a 10x return on investment, plus you get your time back to focus on growing your business!</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="pricing-guarantee">
                <h3>Our No-Risk Guarantee</h3>
                <p>We don't get paid until your solution is complete and you confirm it's saving you time. If we can't demonstrate measurable time savings, you pay nothing.</p>
            </div>
        </div>
    </section>
    <section class="social-proof">
        <div class="container">
            <h2>Real Results from Real Businesses</h2>
            <div class="testimonial">
                <blockquote>
                    "JAX AI helped us automate our appointment reminders and follow-up emails. We went from spending 8 hours a week on administrative tasks to just 30 minutes. Our no-show rate dropped by 40% and customer satisfaction is through the roof."
                </blockquote>
                <cite>â€” Sarah M., Hair Salon Owner</cite>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>Your Local AI Partner</h2>
                    <p>I'm not a big tech company or startup. I'm a local consultant who understands small business because I've been there.</p>
                    <p>I specialize in taking complex AI technology and making it simple, practical, and profitable for business owners who want results, not tech headaches.</p>
                    <p>My approach is personal, patient, and focused on your specific business needs. I'll work with you step-by-step to implement AI solutions that actually save you time and money.</p>
                    <p><strong>Based in Jacksonville, FL</strong> - available for in-person consultations and ongoing support.</p>
                </div>
                <div class="about-image">
                    <img src="https://previews.dropbox.com/p/thumb/ACsO6Zh1T0efmNkyxrPhGoQ-cJcVpgKHdi2k2hVlnfwtUpFEEulX8U2HVYL3gdm_DgLXHFLkK-kczfj6Vwpkxpft3DZ_1cMEgLB0dPz6_0xwucpKjKku7pXRi9WYK6PvzkUiiESfeu6t4Y5Kj0qA3P-d-gdKmqSnvNhbUYheLbSi3n410INNfv7BWKDzjRg2WgEem-LF_BAeDa6PjbYZk6WL0rTkDUmGteCvmDzoTjhfdNscGbSw-LjoPmOXbjDYhw3MmJjIaq8pvngUfb3NxddMMTn1w7GJY6RYwj2KJ2FjPM5BXvf0EPEO0mI-7gLcqK3HtcNxcidhrlIMMDHY1YB4/p.jpeg?is_prewarmed=true" alt="Professional headshot" />
                </div>
            </div>
        </div>
    </section>

    <!-- Final CTA -->
    <section class="final-cta" id="contact">
        <div class="container">
            <h2>Ready to Get 10+ Hours Back Every Week?</h2>
            <p>Let's talk about how AI can transform your business. No tech jargon, no pushy sales pitch - just practical solutions that work.</p>
            <button class="btn-primary" onclick="openAssessment()">Get Your Free AI Assessment</button>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <svg width="120" height="36" viewBox="0 0 400 120" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: 1rem;">
                        <!-- Logo Icon -->
                        <g transform="translate(8, 12)">
                            <!-- Main container -->
                            <rect x="0" y="0" width="32" height="32" fill="none" stroke="#2563eb" stroke-width="1.2" rx="3"/>
                            
                            <!-- Grid lines - subtle -->
                            <line x1="8" y1="0" x2="8" y2="32" stroke="#e2e8f0" stroke-width="0.4"/>
                            <line x1="16" y1="0" x2="16" y2="32" stroke="#e2e8f0" stroke-width="0.4"/>
                            <line x1="24" y1="0" x2="24" y2="32" stroke="#e2e8f0" stroke-width="0.4"/>
                            <line x1="0" y1="8" x2="32" y2="8" stroke="#e2e8f0" stroke-width="0.4"/>
                            <line x1="0" y1="16" x2="32" y2="16" stroke="#e2e8f0" stroke-width="0.4"/>
                            <line x1="0" y1="24" x2="32" y2="24" stroke="#e2e8f0" stroke-width="0.4"/>
                            
                            <!-- Primary circuit path -->
                            <path d="M4 4 L24 4 L24 12 L28 12" stroke="#2563eb" stroke-width="1.6" fill="none" stroke-linecap="round"/>
                            
                            <!-- Secondary circuit path -->
                            <path d="M4 28 L4 20 L16 20 L16 8 L28 8" stroke="#059669" stroke-width="1.6" fill="none" stroke-linecap="round"/>
                            
                            <!-- Data nodes - Primary path -->
                            <circle cx="4" cy="4" r="1.6" fill="#2563eb"/>
                            <circle cx="24" cy="4" r="1.6" fill="#2563eb"/>
                            <circle cx="24" cy="12" r="1.6" fill="#2563eb"/>
                            <circle cx="28" cy="12" r="1.6" fill="#2563eb"/>
                            
                            <!-- Data nodes - Secondary path -->
                            <circle cx="4" cy="28" r="1.6" fill="#059669"/>
                            <circle cx="4" cy="20" r="1.6" fill="#059669"/>
                            <circle cx="16" cy="20" r="1.6" fill="#059669"/>
                            <circle cx="16" cy="8" r="1.6" fill="#059669"/>
                            <circle cx="28" cy="8" r="1.6" fill="#059669"/>
                            
                            <!-- Central AI processor -->
                            <rect x="13" y="13" width="6" height="6" rx="1" fill="#1d4ed8" stroke="#1e40af" stroke-width="0.4"/>
                            <text x="16" y="17.5" font-family="Arial, sans-serif" font-size="4" font-weight="bold" fill="white" text-anchor="middle">AI</text>
                            
                            <!-- Corner accent nodes -->
                            <circle cx="28" cy="28" r="1.2" fill="#f59e0b"/>
                            <circle cx="28" cy="4" r="1.2" fill="#f59e0b"/>
                        </g>
                        
                        <!-- Company Text -->
                        <g transform="translate(48, 12)">
                            <!-- Main company name -->
                            <text x="0" y="14" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">JAX AI</text>
                            
                            <!-- Subtitle -->
                            <text x="0" y="26" font-family="Arial, sans-serif" font-size="7" font-weight="500" fill="white">CONSULTING</text>
                        </g>
                    </svg>
                    <p>AI solutions that actually work for small business owners.</p>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p>hello@jaxaiconsulting.com</p>
                    <p>Jacksonville, FL</p>
                </div>
                <div class="footer-section">
                    <h3>Services</h3>
                    <p>AI Strategy & Implementation</p>
                    <p>Business Process Automation</p>
                    <p>Training & Support</p>
                </div>
            </div>
            <p>&copy; 2025 JAX AI Consulting. All rights reserved.</p>
        </div>
    </footer>

    <!-- Assessment Modal -->
    <div id="assessmentModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAssessment()">&times;</button>
            <div class="assessment-container">
                <div class="intake-card">
                    <h1>AI Business Assessment</h1>
                    <p class="subtitle">Let's have a natural conversation about your business and discover how AI can help you save 10+ hours per week.</p>
                    
                    <!-- Auto-start assessment (API key embedded) -->
                    <div id="loadingMessage" style="text-align: center; padding: 2rem;">
                        <p>Starting your AI assessment powered by ChatGPT-4o...</p>
                    </div>

                    <div class="conversation-display" id="conversationDisplay" style="display: none;">
                    </div>

                    <div class="input-section" id="inputSection" style="display: none;">
                        <textarea class="text-input" id="textInput" placeholder="Type your response here..."></textarea>
                        <div class="input-controls">
                            <button class="voice-button" id="voiceButton" title="Click to speak">ðŸŽ¤</button>
                            <button class="input-button" id="submitButton" onclick="sendMessage()">Send</button>
                        </div>
                        <div class="status-text" id="statusText"></div>
                    </div>

                    <div class="summary-card" id="summaryCard" style="display: none;">
                        <h3>Your Business Assessment Summary</h3>
                        <div id="summaryContent"></div>
                        <a href="#" class="assessment-cta-button" id="emailResultsButton">Send Results & Schedule Follow-up</a>
                    </div>

                    <div class="error-message" id="errorMessage" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add scroll effect to header
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(255, 255, 255, 0.95)';
                header.style.backdropFilter = 'blur(10px)';
            } else {
                header.style.background = '#fff';
                header.style.backdropFilter = 'none';
            }
        });

        // Modal functions for main website
        function openAssessment() {
            console.log('openAssessment called');
            const modal = document.getElementById('assessmentModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Initialize assessment if not already done
                if (!window.assessmentInitialized) {
                    console.log('Initializing enhanced ChatGPT assessment');
                    new DynamicAIAssessment();
                    window.assessmentInitialized = true;
                }
            } else {
                console.error('Modal not found!');
            }
        }

        function closeAssessment() {
            const modal = document.getElementById('assessmentModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Close modal when clicking outside or pressing Escape
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('assessmentModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeAssessment();
                    }
                });
            }
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeAssessment();
                }
            });
        });

        function saveApiKey() {
            // No API key needed in frontend anymore
            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('conversationDisplay').style.display = 'block';
            document.getElementById('inputSection').style.display = 'block';
            
            if (window.assessmentSystem) {
                window.assessmentSystem.startAssessment();
            }
        }

        function sendMessage() {
            if (window.assessmentSystem) {
                window.assessmentSystem.sendMessage();
            }
        }

// Complete Fixed DynamicAIAssessment class addressing all feedback issues
class DynamicAIAssessment {
    constructor() {
        this.conversationHistory = [];
        this.businessData = {};
        this.isListening = false;
        this.recognition = null;
        this.solutionProposalGenerated = false;
        this.totalTokensUsed = 0;
        this.conversationPhase = 'introduction'; // introduction, details, completion
        this.nameUsageCount = 0; // Track how often we use their name
        
        // Required data points with priority order for early capture
        this.requiredData = {
            contact_name: { captured: false, priority: 1, label: 'Full Name', earlyCapture: true },
            business_name: { captured: false, priority: 2, label: 'Business Name', earlyCapture: true },
            business_location: { captured: false, priority: 3, label: 'Business Location', earlyCapture: true },
            business_type: { captured: false, priority: 4, label: 'Business Type', earlyCapture: true },
            contact_email: { captured: false, priority: 5, label: 'Email Address', earlyCapture: false },
            contact_phone: { captured: false, priority: 6, label: 'Phone Number', earlyCapture: false },
            pain_points: { captured: false, priority: 7, label: 'Main Pain Points/Challenges', earlyCapture: false },
            current_solution: { captured: false, priority: 8, label: 'Current Solutions in Place', earlyCapture: false },
            time_savings: { captured: false, priority: 9, label: 'Potential Weekly Time Savings', earlyCapture: false },
            time_value: { captured: false, priority: 10, label: 'Hourly Time Value', earlyCapture: false, required: true }
        };
        
        window.assessmentSystem = this;
        this.init();
        
        // Auto-start with embedded API key
        setTimeout(() => {
            saveApiKey();
        }, 1000);
    }

    init() {
        this.setupSpeechRecognition();
        this.setupEventListeners();
    }

    setupSpeechRecognition() {
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            this.recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            this.recognition.continuous = false;
            this.recognition.interimResults = false;
            this.recognition.lang = 'en-US';

            this.recognition.onstart = () => {
                this.isListening = true;
                this.updateVoiceButton();
                this.updateStatus('Listening... speak now');
            };

            this.recognition.onend = () => {
                this.isListening = false;
                this.updateVoiceButton();
                this.updateStatus('');
            };

            this.recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                document.getElementById('textInput').value = transcript;
                this.sendMessage();
            };

            this.recognition.onerror = () => {
                this.showError('Speech recognition error. Please try typing instead.');
                this.isListening = false;
                this.updateVoiceButton();
            };
        }
    }

    setupEventListeners() {
        document.getElementById('voiceButton').addEventListener('click', () => {
            if (this.isListening) {
                this.stopListening();
            } else {
                this.startListening();
            }
        });

        document.getElementById('textInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                this.sendMessage();
            }
        });
    }

    startAssessment() {
        const welcomeMessage = `Hi there! I'm your AI consultant from JAX AI Consulting, and I'm excited to learn about your business and explore how we can help you save 10+ hours per week through smart automation.

To give you the most personalized recommendations, let me start by getting to know you and your business.

What's your name, and could you tell me the name and location of your business?`;

        this.addMessage(welcomeMessage, 'ai');
        this.updateStatus('Please share your name and business details');
    }

    startListening() {
        if (this.recognition) {
            this.recognition.start();
        }
    }

    stopListening() {
        if (this.recognition) {
            this.recognition.stop();
        }
    }

    updateVoiceButton() {
        const button = document.getElementById('voiceButton');
        
        if (this.isListening) {
            button.classList.add('listening');
            button.innerHTML = 'ðŸ”´';
            button.title = 'Click to stop listening';
        } else {
            button.classList.remove('listening');
            button.innerHTML = 'ðŸŽ¤';
            button.title = 'Click to speak';
        }
    }

    updateStatus(message) {
        const progress = this.getCompletionProgress();
        const earlyProgress = this.getEarlyDataProgress();
        
        if (this.conversationPhase === 'introduction') {
            document.getElementById('statusText').textContent = `${message} (${earlyProgress}% basic info complete)`;
        } else {
            document.getElementById('statusText').textContent = `${message} (${progress}% complete)`;
        }
    }

    getCompletionProgress() {
        const totalRequired = Object.keys(this.requiredData).length;
        const completed = Object.values(this.requiredData).filter(item => item.captured).length;
        return Math.round((completed / totalRequired) * 100);
    }

    getEarlyDataProgress() {
        const earlyData = Object.values(this.requiredData).filter(item => item.earlyCapture);
        const completedEarly = earlyData.filter(item => item.captured);
        return Math.round((completedEarly.length / earlyData.length) * 100);
    }

    hasEarlyDataComplete() {
        return Object.values(this.requiredData)
            .filter(item => item.earlyCapture)
            .every(item => item.captured);
    }

    shouldUseName() {
        // Use name more strategically: first time, then every 3-4 exchanges, and at key moments
        this.nameUsageCount++;
        return this.nameUsageCount === 1 || this.nameUsageCount % 4 === 0 || this.solutionProposalGenerated;
    }

    async sendMessage() {
        const input = document.getElementById('textInput');
        const message = input.value.trim();
        
        if (!message) return;

        const submitButton = document.getElementById('submitButton');
        submitButton.disabled = true;
        submitButton.textContent = 'Sending...';

        this.addMessage(message, 'user');
        input.value = '';

        // Check if this is a response to consultation question (after solution proposal)
        if (this.solutionProposalGenerated) {
            if (message.toLowerCase().includes('yes') || message.toLowerCase().includes('schedule') || message.toLowerCase().includes('consultation')) {
                this.handleConsultationRequest(message);
            } else {
                this.addMessage('Thank you for your response. Let me know if you have any questions or if you\'d like to schedule a consultation!', 'ai');
            }
            submitButton.disabled = false;
            submitButton.textContent = 'Send';
            return;
        }

        try {
            // Extract any data from the user's message first
            this.extractDataFromMessage(message);
            
            // Update conversation phase based on data captured
            this.updateConversationPhase();
            
            // Check if we have all required data - if so, go straight to proposal
            if (this.hasAllRequiredData()) {
                // Don't send another AI response, go directly to proposal generation
                this.addMessage('Perfect! I have all the information I need. Let me analyze your business and create a comprehensive automation proposal with accurate ROI calculations...', 'ai');
                this.updateStatus('Generating your personalized solution proposal...');
                setTimeout(() => {
                    this.generateSolutionProposal();
                }, 1500);
            } else {
                // Get AI response that intelligently continues the conversation
                const aiResponse = await this.getIntelligentAIResponse(message);
                this.addMessage(aiResponse, 'ai');
                this.updateStatus('Continue sharing about your business');
            }
            
        } catch (error) {
            this.showError('Error processing your message. Please try again.');
            console.error('AI Response Error:', error);
        }
        
        submitButton.disabled = false;
        submitButton.textContent = 'Send';
    }

    updateConversationPhase() {
        if (this.conversationPhase === 'introduction' && this.hasEarlyDataComplete()) {
            this.conversationPhase = 'details';
        } else if (this.conversationPhase === 'details' && this.getCompletionProgress() >= 80) {
            this.conversationPhase = 'completion';
        }
    }

    async getIntelligentAIResponse(userMessage) {
        // Build context about what data we still need
        const missingData = this.getMissingDataContext();
        const capturedData = this.getCapturedDataContext();
        const name = this.businessData.contact_name ? this.businessData.contact_name.split(' ')[0] : '';
        const businessName = this.businessData.business_name || '';
        const businessLocation = this.businessData.business_location || '';
        const businessType = this.businessData.business_type || '';
        const useName = this.shouldUseName();
        
        let systemPrompt = '';
        
        if (this.conversationPhase === 'introduction') {
            systemPrompt = `You are an expert business consultant conducting an AI assessment for JAX AI Consulting. You are in the INTRODUCTION phase and must prioritize capturing basic information early.

PRIORITY GOAL: Get name, business name, business location, and business type in the next 1-2 exchanges.

CURRENT STATUS:
- Name: ${name || 'NOT CAPTURED - ASK FOR THIS'}
- Business Name: ${businessName || 'NOT CAPTURED - ASK FOR THIS'}  
- Business Location: ${businessLocation || 'NOT CAPTURED - ASK FOR THIS'}
- Business Type: ${businessType || 'NOT CAPTURED - ASK FOR THIS'}

NAME USAGE: ${useName ? `Use their name (${name}) naturally in this response` : 'Do not use their name in this response'}

CONVERSATION STRATEGY:
1. If they haven't given their name yet, ask for it directly
2. If they haven't shared business name/location, ask specifically: "What's the name of your business and where are you located?"
3. If they haven't described what type of business, ask: "What type of business do you run?"
4. Keep responses under 60 words and focused on getting these 4 pieces of info
5. Once you have name + business details, acknowledge them personally and transition to asking about challenges

CRITICAL: Don't move to detailed business questions until you have captured name, business name, location, and business type.`;
        } else {
            systemPrompt = `You are an expert business consultant conducting an AI assessment for JAX AI Consulting. You have the basic information and are now diving deeper.

PERSONALIZATION DATA:
- Name: ${name}
- Business: ${businessName} in ${businessLocation}
- Business Type: ${businessType}
- Current conversation has covered: ${capturedData}

CRITICAL DATA STILL NEEDED:
${missingData}

NAME USAGE: ${useName ? `Use their name (${name}) naturally in this response` : 'Do not use their name in this response - keep it conversational without repeating their name'}

CONVERSATION GUIDELINES:
1. ASK ONLY ONE PRIORITY QUESTION PER RESPONSE - never combine multiple questions
2. Reference their specific business (${businessName}) and location when relevant
3. Ask business-specific questions based on their type of business (${businessType})
4. CRITICAL MISSING DATA PRIORITIES:
   - If missing time value, ask ONLY: "What do you value your time at per hour? This helps me calculate the exact ROI for your business."
   - If missing time savings, ask ONLY: "How many hours per week do you think automation could save you?"
   - If missing other data, ask one focused question about the most important missing piece
5. Keep responses under 60 words - focus on ONE question only
6. Show genuine interest in their specific business challenges
7. Make recommendations relevant to their business type and location

RESPONSE STRATEGY:
- Ask ONE focused question that captures the highest priority missing data
- Reference their business specifically when relevant: "For ${businessName}..." or "At your ${businessType}..."
- Connect your question to their previous answers
- Don't overuse their name - be natural and conversational
- NEVER ask multiple questions in the same response

Remember: This should feel like a natural conversation with focused, single questions that build on each other.`;
        }

        try {
            const functionUrl = window.location.hostname === 'localhost' 
                ? 'http://localhost:8888/.netlify/functions/ai-assessment'
                : '/.netlify/functions/ai-assessment';

            const response = await fetch(functionUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    messages: this.conversationHistory.concat([{role: 'user', content: userMessage}]),
                    systemPrompt: systemPrompt,
                    maxTokens: this.conversationPhase === 'introduction' ? 100 : 150
                })
            });

            if (!response.ok) {
                throw new Error(`Backend request failed with status ${response.status}`);
            }

            const data = await response.json();
            const aiResponse = data.content[0].text;

            // Track token usage
            if (data.usage) {
                this.totalTokensUsed += data.usage.total_tokens;
            }

            // Add to conversation history
            this.conversationHistory.push({
                role: 'user',
                content: userMessage
            });
            this.conversationHistory.push({
                role: 'assistant',
                content: aiResponse
            });

            return aiResponse;

        } catch (error) {
            console.error('API Error:', error);
            throw error;
        }
    }

    extractDataFromMessage(message) {
        const lowerMessage = message.toLowerCase();
        
        // Enhanced name extraction (higher priority, more patterns)
        if (!this.requiredData.contact_name.captured) {
            const namePatterns = [
                /(?:my name is|i'm|i am|call me|this is)\s+([a-zA-Z]+(?:\s+[a-zA-Z]+)*)/i,
                /^([a-zA-Z]+(?:\s+[a-zA-Z]+)*?)(?:\s+(?:and|from|here|owner|,|\.|!|-))/i,
                /hi(?:\s+there)?(?:\s+i'm|\s+my\s+name\s+is)\s+([a-zA-Z]+(?:\s+[a-zA-Z]+)*)/i
            ];
            for (const pattern of namePatterns) {
                const match = message.match(pattern);
                if (match && match[1] && match[1].split(' ').length <= 3) {
                    // Clean up the name
                    let name = match[1].trim();
                    // Remove common business words that might get captured
                    name = name.replace(/\b(owner|manager|from|and|the|business|company|shop|salon|clinic)\b/gi, '').trim();
                    if (name && name.length > 1) {
                        this.businessData.contact_name = name;
                        this.requiredData.contact_name.captured = true;
                        break;
                    }
                }
            }
        }

        // Enhanced business name extraction
        if (!this.requiredData.business_name.captured) {
            const businessNamePatterns = [
                /(?:business called|company called|business name is|called)\s+([^.!?,\n]+)/i,
                /(?:i run|i own|my business|business is)\s+([^.!?,\n]+)/i,
                /^(.+?)\s+(?:in|is|located|here in)/i  // Business name before location
            ];
            for (const pattern of businessNamePatterns) {
                const match = message.match(pattern);
                if (match && match[1]) {
                    let businessName = match[1].trim();
                    // Clean up business name
                    businessName = businessName.replace(/\b(is|in|located|here|the|a)\b/gi, '').trim();
                    if (businessName && businessName.length > 2) {
                        this.businessData.business_name = businessName;
                        this.requiredData.business_name.captured = true;
                        break;
                    }
                }
            }
        }

        // Enhanced location extraction
        if (!this.requiredData.business_location.captured) {
            const locationPatterns = [
                /(?:in|located in|based in|from|here in)\s+([^.!?,\n]+)/i,
                /(?:Jacksonville|Jax|Florida|FL|Miami|Tampa|Orlando|[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*),?\s*(?:FL|Florida)?/i
            ];
            for (const pattern of locationPatterns) {
                const match = message.match(pattern);
                if (match && match[1]) {
                    let location = match[1].trim();
                    location = location.replace(/\b(the|a|is|and)\b/gi, '').trim();
                    if (location && location.length > 2) {
                        this.businessData.business_location = location;
                        this.requiredData.business_location.captured = true;
                        break;
                    }
                }
            }
        }

        // Enhanced business type extraction
        if (!this.requiredData.business_type.captured) {
            const businessTypePatterns = [
                /(?:i run a|i own a|type of business|business is a|i operate a)\s+([^.!?,\n]+)/i,
                /\b(salon|spa|clinic|restaurant|shop|store|practice|firm|company|dental|medical|retail|gym|fitness|bakery|cafe|bar|hotel|accounting|law|consulting|grooming|pet)\b/i
            ];
            for (const pattern of businessTypePatterns) {
                const match = message.match(pattern);
                if (match && match[1]) {
                    this.businessData.business_type = match[1].trim();
                    this.requiredData.business_type.captured = true;
                    break;
                } else if (match && match[0]) {
                    this.businessData.business_type = match[0].trim();
                    this.requiredData.business_type.captured = true;
                    break;
                }
            }
        }

        // Extract email
        if (!this.requiredData.contact_email.captured) {
            const emailMatch = message.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/);
            if (emailMatch) {
                this.businessData.contact_email = emailMatch[1];
                this.requiredData.contact_email.captured = true;
            }
        }

        // Extract phone
        if (!this.requiredData.contact_phone.captured) {
            const phoneMatch = message.match(/(\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4})/);
            if (phoneMatch) {
                this.businessData.contact_phone = phoneMatch[1];
                this.requiredData.contact_phone.captured = true;
            }
        }

        // Extract pain points (look for problem indicators)
        if (!this.requiredData.pain_points.captured) {
            const painIndicators = ['problem', 'issue', 'challenge', 'difficult', 'time consuming', 'manual', 'frustrated', 'waste', 'inefficient', 'struggle', 'hard', 'annoying'];
            if (painIndicators.some(indicator => lowerMessage.includes(indicator)) && message.length > 20) {
                this.businessData.pain_points = message;
                this.requiredData.pain_points.captured = true;
            }
        }

        // Extract current solutions
        if (!this.requiredData.current_solution.captured) {
            const solutionIndicators = ['currently', 'right now', 'using', 'have', 'system', 'software', 'manual', 'spreadsheet', 'nothing', 'no system', 'pen and paper'];
            if (solutionIndicators.some(indicator => lowerMessage.includes(indicator)) && message.length > 15) {
                this.businessData.current_solution = message;
                this.requiredData.current_solution.captured = true;
            }
        }

        // Extract time savings - CRITICAL: Must ask specific question for this
        if (!this.requiredData.time_savings.captured) {
            const timeMatch = message.match(/(\d+(?:\.\d+)?)\s*(?:hours?|hrs?)/i);
            const savingsIndicators = ['save', 'hour', 'time', 'week', 'automation', 'could save'];
            if (timeMatch || savingsIndicators.some(indicator => lowerMessage.includes(indicator))) {
                this.businessData.time_savings = message;
                this.requiredData.time_savings.captured = true;
            }
        }

        // CRITICAL: Enhanced time value extraction - this is required!
        if (!this.requiredData.time_value.captured) {
            const valueMatch = message.match(/\$?(\d+(?:,\d{3})*(?:\.\d{2})?)/);
            const valueIndicators = ['dollar', 'worth', 'hour', 'value', 'time'];
            if (valueMatch || valueIndicators.some(indicator => lowerMessage.includes(indicator))) {
                this.businessData.time_value = message;
                this.requiredData.time_value.captured = true;
            }
        }
    }

    getMissingDataContext() {
        const missing = Object.entries(this.requiredData)
            .filter(([key, data]) => !data.captured)
            .sort((a, b) => a[1].priority - b[1].priority)
            .map(([key, data]) => `- ${data.label}`)
            .join('\n');
        
        return missing || 'All required data captured!';
    }

    getCapturedDataContext() {
        const captured = Object.entries(this.requiredData)
            .filter(([key, data]) => data.captured)
            .map(([key, data]) => data.label)
            .join(', ');
        
        return captured || 'None yet';
    }

    hasAllRequiredData() {
        return Object.values(this.requiredData).every(item => item.captured);
    }

    handleConsultationRequest(message) {
        // Add user response to conversation
        this.conversationHistory.push({
            role: 'user',
            content: message
        });

        // Send assessment data to free webhook service
        this.sendAssessmentToFreeWebhook();
        
        // Show confirmation message with personalization
        const name = this.businessData.contact_name ? `, ${this.businessData.contact_name.split(' ')[0]}` : '';
        const businessName = this.businessData.business_name ? ` for ${this.businessData.business_name}` : '';
        this.addMessage(`Perfect${name}! I've sent your detailed assessment${businessName} to JAX AI Consulting. Based on your ${this.businessData.business_type || 'business'} in ${this.businessData.business_location || 'your area'}, someone will reach out within 24 hours to schedule your consultation. Thank you for your interest!`, 'ai');
        
        // Hide input section
        document.getElementById('inputSection').style.display = 'none';
        this.updateStatus('Assessment complete - You will be contacted within 24 hours');
    }

    async sendAssessmentToFreeWebhook() {
        try {
            // Multiple webhook attempts for reliability
            const webhookUrls = [
                // Add your n8n webhook URL here when you set it up
                // 'https://your-n8n-instance.app.n8n.cloud/webhook/assessment'
            ];

            const assessmentPayload = {
                timestamp: new Date().toISOString(),
                source: 'JAX AI Assessment',
                contactName: this.businessData.contact_name || '',
                businessName: this.businessData.business_name || '',
                businessLocation: this.businessData.business_location || '',
                businessType: this.businessData.business_type || '',
                contactEmail: this.businessData.contact_email || '',
                contactPhone: this.businessData.contact_phone || '',
                painPoints: this.businessData.pain_points || '',
                currentSolution: this.businessData.current_solution || '',
                timeSavings: this.businessData.time_savings || '',
                timeValue: this.businessData.time_value || '',
                leadScore: this.calculateLeadScore(),
                tokensUsed: this.totalTokensUsed,
                aiProvider: 'OpenAI ChatGPT-4o',
                dataCompleteness: this.getCompletionProgress(),
                conversationSummary: this.conversationHistory.map(msg => `${msg.role}: ${msg.content}`).join('\n\n'),
                solutionProposal: this.getSolutionFromConversation()
            };

            // Try sending to webhook if available
            let webhookSuccess = false;
            for (const url of webhookUrls) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(assessmentPayload)
                    });
                    if (response.ok) {
                        webhookSuccess = true;
                        console.log('Webhook sent successfully');
                        break;
                    }
                } catch (error) {
                    console.log('Webhook failed, trying next option');
                }
            }

            // Always send email as backup/primary method for now
            this.openEnhancedEmail(assessmentPayload);

        } catch (error) {
            console.error('Webhook error:', error);
            // Fallback to email
            this.openEnhancedEmail();
        }
    }

    openEnhancedEmail(assessmentData = null) {
        const contactName = this.businessData.contact_name || 'Not provided';
        const businessName = this.businessData.business_name || 'Not provided';
        const businessLocation = this.businessData.business_location || 'Not provided';
        const businessType = this.businessData.business_type || 'Not provided';
        const contactEmail = this.businessData.contact_email || 'Not provided';
        const contactPhone = this.businessData.contact_phone || 'Not provided';

        const emailSubject = `ðŸ”¥ HOT LEAD: ${contactName} from ${businessName} (Score: ${this.calculateLeadScore()}/100)`;
        
        const emailBody = `URGENT: New qualified lead wants consultation!

CONTACT INFORMATION:
===================
Name: ${contactName}
Business: ${businessName}
Location: ${businessLocation}
Type: ${businessType}
Email: ${contactEmail}
Phone: ${contactPhone}

ASSESSMENT SUMMARY:
==================
Pain Points: ${this.businessData.pain_points || 'Not provided'}
Current Solutions: ${this.businessData.current_solution || 'Not provided'}
Potential Time Savings: ${this.businessData.time_savings || 'Not provided'}
Time Value: ${this.businessData.time_value || 'Not provided'}
Lead Score: ${this.calculateLeadScore()}/100
Data Completeness: ${this.getCompletionProgress()}%

AI PROVIDER: ChatGPT-4o
TOKENS USED: ${this.totalTokensUsed}
CONVERSATION PHASE: ${this.conversationPhase}

FULL CONVERSATION:
==================
${this.conversationHistory.map(msg => `${msg.role.toUpperCase()}: ${msg.content}`).join('\n\n')}

ðŸŽ¯ ACTION REQUIRED: Contact within 24 hours to schedule consultation!

PERSONALIZED FOLLOW-UP SUGGESTIONS:
- Reference their business name: ${businessName}
- Mention their location: ${businessLocation}
- Focus on their business type: ${businessType}
- Address their specific pain points in first email`;

        const emailLink = `mailto:hello@jaxaiconsulting.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
        window.open(emailLink, '_blank');
    }

    getSolutionFromConversation() {
        const solutionMessage = this.conversationHistory
            .slice()
            .reverse()
            .find(msg => msg.role === 'assistant' && (
                msg.content.includes('AUTOMATION OPPORTUNITIES') || 
                msg.content.includes('SOLUTION PROPOSAL') ||
                msg.content.includes('ROI ANALYSIS')
            ));
        
        return solutionMessage ? solutionMessage.content : 'Solution proposal generated';
    }

    calculateLeadScore() {
        let score = 25; // Base score for completing assessment
        
        // Data completeness bonus
        const completeness = this.getCompletionProgress();
        score += Math.round(completeness * 0.3); // Up to 30 points for complete data
        
        // Early data completion bonus (name, business details)
        const earlyCompletion = this.getEarlyDataProgress();
        score += Math.round(earlyCompletion * 0.15); // Up to 15 points for early engagement
        
        // Enhanced scoring using better business logic
        const timeValue = this.extractTimeValue(this.businessData.time_value);
        const timeSavings = this.extractTimeSavings(this.businessData.time_savings);
        
        // Time value scoring (more granular)
        if (timeValue >= 200) score += 40;
        else if (timeValue >= 100) score += 30;
        else if (timeValue >= 75) score += 25;
        else if (timeValue >= 50) score += 20;
        else if (timeValue >= 25) score += 10;
        
        // Time savings potential (more granular)
        if (timeSavings >= 15) score += 35;
        else if (timeSavings >= 10) score += 25;
        else if (timeSavings >= 5) score += 15;
        else if (timeSavings >= 2) score += 10;
        
        // Business type scoring
        const businessType = (this.businessData.business_type || '').toLowerCase();
        if (businessType.includes('salon') || businessType.includes('spa') || 
            businessType.includes('clinic') || businessType.includes('dental') ||
            businessType.includes('medical') || businessType.includes('appointment') ||
            businessType.includes('grooming') || businessType.includes('pet')) {
            score += 15; // High-automation potential businesses
        } else if (businessType.includes('retail') || businessType.includes('restaurant') ||
                   businessType.includes('service')) {
            score += 10; // Medium-automation potential
        }
        
        // Pain points analysis
        const painPoints = (this.businessData.pain_points || '').toLowerCase();
        if (painPoints.includes('manual') || painPoints.includes('scheduling') ||
            painPoints.includes('reminder') || painPoints.includes('follow')) {
            score += 15; // Direct automation opportunities
        }
        
        return Math.min(score, 100);
    }

    extractTimeValue(timeValueText) {
        if (!timeValueText) return 0;
        const matches = timeValueText.match(/\$?(\d+(?:,\d{3})*(?:\.\d{2})?)/);
        return matches ? parseFloat(matches[1].replace(/,/g, '')) : 0;
    }

    extractTimeSavings(timeSavingsText) {
        if (!timeSavingsText) return 0;
        const hourMatches = timeSavingsText.match(/(\d+(?:\.\d+)?)\s*(?:hours?|hrs?)/i);
        if (hourMatches) return parseFloat(hourMatches[1]);
        
        const numberMatches = timeSavingsText.match(/(\d+(?:\.\d+)?)/);
        return numberMatches ? parseFloat(numberMatches[1]) : 0;
    }

    async generateSolutionProposal() {
        const name = this.businessData.contact_name ? this.businessData.contact_name.split(' ')[0] : '';
        const businessName = this.businessData.business_name || 'your business';
        const businessLocation = this.businessData.business_location || 'your area';
        
        setTimeout(async () => {
            try {
                const solutionPrompt = `Create a comprehensive AI solution proposal for this business owner. Use their specific information to personalize the proposal throughout.

BUSINESS OWNER: ${this.businessData.contact_name || 'Business Owner'}
BUSINESS: ${this.businessData.business_name || 'Their Business'}
LOCATION: ${this.businessData.business_location || 'Location not specified'}
BUSINESS TYPE: ${this.businessData.business_type || 'Small Business'}
MAIN CHALLENGES: ${this.businessData.pain_points || 'Manual processes and time management'}
CURRENT SOLUTIONS: ${this.businessData.current_solution || 'Mostly manual processes'}
POTENTIAL TIME SAVINGS: ${this.businessData.time_savings || '5-10 hours per week'}
TIME VALUE: ${this.businessData.time_value || '$50 per hour'}

CRITICAL INSTRUCTIONS:
1. Use their EXACT time value from the conversation - do not assume or make up numbers
2. Calculate ROI using their specific time value and time savings
3. Do NOT include email signature, placeholders for names, or "Warm regards" endings
4. End with ONLY the consultation question

PROPOSAL STRUCTURE:

1. **EXECUTIVE SUMMARY**
   - Address them by first name only
   - Reference their business name and location specifically
   - Highlight automation opportunities specific to their business type
   - Mention their specific challenges

2. **DETAILED ROI ANALYSIS**
   - Use their EXACT time value from the conversation
   - Use their EXACT estimated time savings
   - Calculate precise annual savings (time savings Ã— time value Ã— 52 weeks)
   - Show JAX AI Consulting's 10% fee calculation
   - Demonstrate actual ROI percentage

3. **CUSTOM AUTOMATION SOLUTIONS**
   - 2-3 solutions tailored to their business type and pain points
   - Reference their business name in examples
   - Explain how each solution addresses their specific challenges

4. **IMPLEMENTATION TIMELINE**
   - 6-week timeline with specific phases
   - Reference their business name in timeline examples
   - Emphasize pay-for-performance model

5. **NEXT STEPS**
   - End with ONLY: "Would you like to schedule an in-person consultation to discuss implementing this solution for [business name]?"
   - NO signature, NO placeholders, NO "warm regards"

Make this feel completely personalized using their actual data. Use precise calculations with their real numbers.`;

                this.addMessage('Creating your personalized automation strategy with precise ROI calculations...', 'thinking');

                const response = await this.getAISolutionResponse(solutionPrompt);
                this.removeLastMessage();
                this.addMessage(response, 'ai');
                
                this.solutionProposalGenerated = true;
                this.updateStatus('Please let me know if you\'d like to schedule a consultation');

            } catch (error) {
                this.removeLastMessage();
                this.showError('Error generating your solution proposal. Please refresh and try again.');
            }
        }, 1500);
    }

    async getAISolutionResponse(solutionPrompt) {
        try {
            const functionUrl = window.location.hostname === 'localhost' 
                ? 'http://localhost:8888/.netlify/functions/ai-assessment'
                : '/.netlify/functions/ai-assessment';

            const response = await fetch(functionUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    messages: [{ role: 'user', content: solutionPrompt }],
                    systemPrompt: 'You are an expert AI business consultant creating highly personalized, detailed solution proposals for small businesses. Use ONLY the exact data provided - never assume or hallucinate numbers. Focus on specific ROI calculations using their real time value and custom automation recommendations. Do NOT include email signatures or placeholders.',
                    maxTokens: 1500
                })
            });

            if (!response.ok) {
                throw new Error(`Backend request failed with status ${response.status}`);
            }

            const data = await response.json();
            const aiResponse = data.content[0].text;

            // Track token usage
            if (data.usage) {
                this.totalTokensUsed += data.usage.total_tokens;
            }

            // Add to conversation history
            this.conversationHistory.push({
                role: 'assistant',
                content: aiResponse
            });

            return aiResponse;

        } catch (error) {
            console.error('Solution API Error:', error);
            throw error;
        }
    }

    addMessage(text, type) {
        const container = document.getElementById('conversationDisplay');
        const message = document.createElement('div');
        message.className = `message ${type}`;
        
        const label = document.createElement('div');
        label.className = 'message-label';
        
        if (type === 'ai') {
            label.textContent = 'AI Consultant (ChatGPT-4o)';
        } else if (type === 'user') {
            label.textContent = 'You';
        } else if (type === 'thinking') {
            label.textContent = 'AI is analyzing...';
        }
        
        const content = document.createElement('div');
        content.className = 'message-content';
        
        // Enhanced formatting for better readability
        let formattedText = text
            .replace(/### (.*?)(\n|$)/g, '<h3>$1</h3>')
            .replace(/## (.*?)(\n|$)/g, '<h3>$1</h3>')
            .replace(/# (.*?)(\n|$)/g, '<h3>$1</h3>')
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/^\* (.*?)$/gm, 'â€¢ $1')
            .replace(/^- (.*?)$/gm, 'â€¢ $1')
            .replace(/^(\d+)\. (.*?)$/gm, '<strong>$1.</strong> $2')
            .replace(/\n\n/g, '</p><p>')
            .replace(/\n/g, '<br>');
        
        if (!formattedText.includes('<h3>') && !formattedText.includes('<p>')) {
            formattedText = '<p>' + formattedText + '</p>';
        } else if (formattedText.includes('<br>') && !formattedText.includes('<p>')) {
            formattedText = '<p>' + formattedText + '</p>';
        }
        
        content.innerHTML = formattedText;
        
        message.appendChild(label);
        message.appendChild(content);
        container.appendChild(message);
        
        container.scrollTop = container.scrollHeight;
    }

    removeLastMessage() {
        const container = document.getElementById('conversationDisplay');
        const lastMessage = container.lastElementChild;
        if (lastMessage) {
            container.removeChild(lastMessage);
        }
    }

    showError(message) {
        const errorDiv = document.getElementById('errorMessage');
        errorDiv.textContent = message;
        errorDiv.style.display = 'block';
        
        setTimeout(() => {
            errorDiv.style.display = 'none';
        }, 5000);
    }
}
    </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAX AI Consulting - AI Solutions for Small Business</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #2563eb;
        }

        .cta-button {
            background: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
        }

        .cta-button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8rem 0 6rem;
            text-align: center;
            margin-top: 80px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: white;
            color: #2563eb;
            padding: 1rem 2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 1rem 2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: white;
            color: #2563eb;
        }

        /* Problem Section */
        .problem-section {
            padding: 6rem 0;
            background: #f8fafc;
        }

        .problem-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .problem-text h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #1e293b;
        }

        .problem-text p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #64748b;
        }

        .problem-list {
            list-style: none;
            margin-bottom: 2rem;
        }

        .problem-list li {
            padding: 0.75rem 0;
            border-left: 4px solid #ef4444;
            padding-left: 1.5rem;
            margin-bottom: 1rem;
            background: white;
            border-radius: 0 6px 6px 0;
        }

        .solution-box {
            background: white;
            padding: 3rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .solution-box h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #059669;
        }

        /* Services Section */
        .services {
            padding: 6rem 0;
            background: white;
        }

        .services h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #1e293b;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .service-card {
            background: #f8fafc;
            padding: 2.5rem;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid #e2e8f0;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .service-icon {
            width: 80px;
            height: 80px;
            background: #2563eb;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .service-card p {
            color: #64748b;
            margin-bottom: 1.5rem;
        }

        .service-examples {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: left;
        }

        .service-examples h4 {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #2563eb;
            margin-bottom: 1rem;
        }

        .service-examples ul {
            list-style: none;
        }

        .service-examples li {
            padding: 0.5rem 0;
            color: #64748b;
            position: relative;
            padding-left: 1.5rem;
        }

        .service-examples li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #059669;
            font-weight: bold;
        }

        /* Pricing Section */
        .pricing {
            padding: 6rem 0;
            background: #f8fafc;
        }

        .pricing h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .pricing-subtitle {
            text-align: center;
            font-size: 1.25rem;
            color: #059669;
            font-weight: 600;
            margin-bottom: 4rem;
        }

        .pricing-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: start;
            margin-bottom: 4rem;
        }

        .pricing-text h3 {
            font-size: 1.75rem;
            margin-bottom: 2rem;
            color: #1e293b;
        }

        .pricing-steps {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .pricing-step {
            display: flex;
            align-items: start;
            gap: 1rem;
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: #2563eb;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .step-content h4 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #1e293b;
        }

        .step-content p {
            color: #64748b;
            font-size: 0.95rem;
        }

        .pricing-example {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .pricing-example h3 {
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            color: #1e293b;
            text-align: center;
        }

        .example-card {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
        }

        .example-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .example-row:last-of-type {
            border-bottom: none;
        }

        .example-row.total {
            background: #f0fdf4;
            border-top: 2px solid #059669;
            font-weight: 700;
        }

        .example-label {
            color: #64748b;
            font-weight: 500;
        }

        .example-value {
            color: #1e293b;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .example-row.total .example-value {
            color: #059669;
            font-size: 1.25rem;
        }

        .example-note {
            background: #dbeafe;
            padding: 1rem 1.5rem;
            border-top: 1px solid #e2e8f0;
        }

        .example-note p {
            color: #1e40af;
            font-weight: 500;
            font-size: 0.9rem;
            text-align: center;
            margin: 0;
        }

        .pricing-guarantee {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-left: 4px solid #059669;
        }

        .pricing-guarantee h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #059669;
        }

        .pricing-guarantee p {
            color: #64748b;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }
        .social-proof {
            padding: 6rem 0;
            background: #1e293b;
            color: white;
            text-align: center;
        }

        .social-proof h2 {
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }

        .testimonial {
            max-width: 800px;
            margin: 0 auto;
            background: #334155;
            padding: 3rem;
            border-radius: 12px;
            border-left: 4px solid #2563eb;
        }

        .testimonial blockquote {
            font-size: 1.25rem;
            font-style: italic;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .testimonial cite {
            font-weight: 600;
            color: #94a3b8;
        }

        /* About Section */
        .about {
            padding: 6rem 0;
            background: white;
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .about-text h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #1e293b;
        }

        .about-text p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #64748b;
        }

        .about-image {
            height: 400px;
            position: relative;
        }

        .about-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
        }

        /* Final CTA Section */
        .final-cta {
            padding: 6rem 0;
            background: #2563eb;
            color: white;
            text-align: center;
        }

        .final-cta h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .final-cta p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        /* Footer */
        footer {
            background: #1e293b;
            color: white;
            padding: 3rem 0;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: #2563eb;
        }

        .footer-section p, .footer-section a {
            color: #94a3b8;
            text-decoration: none;
        }

        .footer-section a:hover {
            color: white;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            max-width: 900px;
            max-height: 90vh;
            width: 90%;
            overflow-y: auto;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #64748b;
            z-index: 10001;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: #f1f5f9;
            color: #ef4444;
        }

        /* Assessment Tool Styles */
        .assessment-container {
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
        }

        .intake-card {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 700px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .intake-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2563eb, #059669);
        }

        .intake-card h1 {
            color: #1e293b;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .subtitle {
            color: #64748b;
            font-size: 1.2rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .conversation-display {
            margin-top: 2rem;
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 200px;
        }

        .message {
            margin-bottom: 1.5rem;
            padding: 1rem;
            border-radius: 12px;
            max-width: 85%;
            animation: fadeIn 0.5s ease-in;
            font-size: 1rem;
            line-height: 1.5;
            color: #1f2937;
        }

        .message.ai {
            background: #dbeafe;
            border-left: 4px solid #2563eb;
            margin-right: auto;
            color: #1e293b;
        }

        .message.user {
            background: #dcfce7;
            border-right: 4px solid #059669;
            margin-left: auto;
            text-align: right;
            color: #1e293b;
        }

        .message.thinking {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            margin-right: auto;
            font-style: italic;
            color: #92400e;
        }

        .message-label {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            opacity: 0.7;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-section {
            margin-top: 2rem;
        }

        .text-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            resize: vertical;
            min-height: 60px;
            margin-bottom: 1rem;
            font-family: inherit;
        }

        .text-input:focus {
            outline: none;
            border-color: #2563eb;
        }

        .input-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            justify-content: center;
        }

        .voice-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2563eb 0%, #059669 100%);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }

        .voice-button.listening {
            animation: pulse 2s infinite;
            background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3); }
            50% { transform: scale(1.1); box-shadow: 0 8px 20px rgba(239, 68, 68, 0.6); }
            100% { transform: scale(1); box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3); }
        }

        .input-button {
            background: #2563eb;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .input-button:hover {
            background: #1d4ed8;
        }

        .input-button:disabled {
            background: #94a3b8;
            cursor: not-allowed;
        }

        .status-text {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #64748b;
            text-align: center;
        }

        .summary-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: left;
            border-left: 4px solid #059669;
        }

        .summary-card h3 {
            color: #059669;
            margin-bottom: 1rem;
        }

        .summary-item {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .summary-value {
            color: #64748b;
        }

        .assessment-cta-button {
            background: linear-gradient(135deg, #2563eb 0%, #059669 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .assessment-cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(37, 99, 235, 0.3);
        }

        .error-message {
            color: #ef4444;
            background: #fee2e2;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            text-align: center;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .problem-content,
            .about-content,
            .pricing-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .container {
                padding: 0 15px;
            }

            .modal-content {
                width: 95%;
                max-height: 95vh;
            }

            .assessment-container {
                padding: 1rem;
            }

            .intake-card {
                padding: 2rem;
            }

            .intake-card h1 {
                font-size: 2rem;
            }

            .input-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">
                <svg width="120" height="36" viewBox="0 0 400 120" xmlns="http://www.w3.org/2000/svg">
                    <!-- Logo Icon -->
                    <g transform="translate(8, 12)">
                        <!-- Main container -->
                        <rect x="0" y="0" width="32" height="32" fill="none" stroke="#2563eb" stroke-width="1.2" rx="3"/>
                        
                        <!-- Grid lines - subtle -->
                        <line x1="8" y1="0" x2="8" y2="32" stroke="#e2e8f0" stroke-width="0.4"/>
                        <line x1="16" y1="0" x2="16" y2="32" stroke="#e2e8f0" stroke-width="0.4"/>
                        <line x1="24" y1="0" x2="24" y2="32" stroke="#e2e8f0" stroke-width="0.4"/>
                        <line x1="0" y1="8" x2="32" y2="8" stroke="#e2e8f0" stroke-width="0.4"/>
                        <line x1="0" y1="16" x2="32" y2="16" stroke="#e2e8f0" stroke-width="0.4"/>
                        <line x1="0" y1="24" x2="32" y2="24" stroke="#e2e8f0" stroke-width="0.4"/>
                        
                        <!-- Primary circuit path -->
                        <path d="M4 4 L24 4 L24 12 L28 12" stroke="#2563eb" stroke-width="1.6" fill="none" stroke-linecap="round"/>
                        
                        <!-- Secondary circuit path -->
                        <path d="M4 28 L4 20 L16 20 L16 8 L28 8" stroke="#059669" stroke-width="1.6" fill="none" stroke-linecap="round"/>
                        
                        <!-- Data nodes - Primary path -->
                        <circle cx="4" cy="4" r="1.6" fill="#2563eb"/>
                        <circle cx="24" cy="4" r="1.6" fill="#2563eb"/>
                        <circle cx="24" cy="12" r="1.6" fill="#2563eb"/>
                        <circle cx="28" cy="12" r="1.6" fill="#2563eb"/>
                        
                        <!-- Data nodes - Secondary path -->
                        <circle cx="4" cy="28" r="1.6" fill="#059669"/>
                        <circle cx="4" cy="20" r="1.6" fill="#059669"/>
                        <circle cx="16" cy="20" r="1.6" fill="#059669"/>
                        <circle cx="16" cy="8" r="1.6" fill="#059669"/>
                        <circle cx="28" cy="8" r="1.6" fill="#059669"/>
                        
                        <!-- Central AI processor -->
                        <rect x="13" y="13" width="6" height="6" rx="1" fill="#1d4ed8" stroke="#1e40af" stroke-width="0.4"/>
                        <text x="16" y="17.5" font-family="Arial, sans-serif" font-size="4" font-weight="bold" fill="white" text-anchor="middle">AI</text>
                        
                        <!-- Corner accent nodes -->
                        <circle cx="28" cy="28" r="1.2" fill="#f59e0b"/>
                        <circle cx="28" cy="4" r="1.2" fill="#f59e0b"/>
                    </g>
                    
                    <!-- Company Text -->
                    <g transform="translate(48, 12)">
                        <!-- Main company name -->
                        <text x="0" y="14" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e293b">JAX AI</text>
                        
                        <!-- Subtitle -->
                        <text x="0" y="26" font-family="Arial, sans-serif" font-size="7" font-weight="500" fill="#64748b">CONSULTING</text>
                    </g>
                </svg>
            </div>
            <ul class="nav-links">
                <li><a href="#services">Services</a></li>
                <li><a href="#pricing">Pricing</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <button class="cta-button" onclick="openAssessment()">Get Your Free AI Assessment</button>
        </nav
